#!/bin/sh

# Show wifi üì∂ and percent strength or üì° if none.
# Show üåê if connected to ethernet or ‚ùé if none.

# üì°: no wifi connection
# üì∂: wifi connection with quality
# ‚ùé: no ethernet
# üåê: ethernet working
case $BLOCK_BUTTON in
	1) "$TERMINAL" -e nmtui; pkill -RTMIN+4 dwmblocks ;;
	3) notify-send "ÔÇ¨  Internet module" "\- Click to connect
ÔÄç : no wifi connection
Ôá´ : wifi connection with quality
ÔÄç : no ethernet
ÔÇ¨ : ethernet working
" ;;
	6) "$TERMINAL" -e "$EDITOR" "$0" ;;
esac

case "$(cat /sys/class/net/w*/operstate 2>/dev/null)" in
  down) case "$(cat /sys/class/net/e*/operstate 2>/dev/null || echo ÔÄç)" in
          down) ethicon=""; wifiicon="ÔÄç" ;;
          up) ethicon=" ÔÇ¨" ;;
          *) ethicon="ÔÄç" ;;
        esac
        wifiicon="" ;;
	up) wifiicon="$(awk '/^\s*w/ { print "^c#88C0D0^ Ôá´ ^d^", int($3 * 100 / 70) "%" }' /proc/net/wireless)" ;;
esac

printf "%s%s\n" "$wifiicon" "$ethicon"
