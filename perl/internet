#!/bin/sh

# Show wifi ğŸ“¶ and percent strength or ğŸ“¡ if none.
# Show ğŸŒ if connected to ethernet or â if none.

# ğŸ“¡: no wifi connection
# ğŸ“¶: wifi connection with quality
# â: no ethernet
# ğŸŒ: ethernet working
case $BLOCK_BUTTON in
	1) "$TERMINAL" -e nmtui; pkill -RTMIN+4 dwmblocks ;;
	3) notify-send "ï‚¬  Internet module" "\- Click to connect
ï€ : no wifi connection
ï‡« : wifi connection with quality
ï€ : no ethernet
ï‚¬ : ethernet working
" ;;
	6) "$TERMINAL" -e "$EDITOR" "$0" ;;
esac

con_quality=$(awk '/^\s*w/ { print int($3 * 100 / 70) }' /proc/net/wireless) || break

case "$(cat /sys/class/net/w*/operstate 2>/dev/null)" in
  down) case "$(cat /sys/class/net/e*/operstate 2>/dev/null || echo ï€)" in
          down) ethicon=""; wifiicon="ï€" ;;
          up) ethicon=" ï‚¬" ;;
          *) ethicon="ï€" ;;
        esac
        wifiicon="" ;;
  up) wifiicon="^c#5faf1b^ï‡«  ^d^"
  	# if [ "$con_quality" -gt 90 ]; then
  #   wifiicon="$(awk '/^\s*w/ { print "^c#5faf1b^ ï‡«  ^d^", int($3 * 100 / 70) "%" }' /proc/net/wireless)"
  # elif [ "$con_quality" -gt 80 ]; then
  #   wifiicon="$(awk '/^\s*w/ { print "^c#6db117^ ï‡«  ^d^", int($3 * 100 / 70) "%" }' /proc/net/wireless)"
  # elif [ "$con_quality" -gt 70 ]; then
  #   wifiicon="$(awk '/^\s*w/ { print "^c#83b511^ ï‡«  ^d^", int($3 * 100 / 70) "%" }' /proc/net/wireless)"
  # elif [ "$con_quality" -gt 60 ]; then
  #   wifiicon="$(awk '/^\s*w/ { print "^c#8cb60e^ ï‡«  ^d^", int($3 * 100 / 70) "%" }' /proc/net/wireless)"
  # elif [ "$con_quality" -gt 50 ]; then
  #   wifiicon="$(awk '/^\s*w/ { print "^c#c7a500^ ï‡«  ^d^", int($3 * 100 / 70) "%" }' /proc/net/wireless)"
  # elif [ "$con_quality" -gt 40 ]; then
  #   wifiicon="$(awk '/^\s*w/ { print "^c#ce9900^ ï‡«  ^d^", int($3 * 100 / 70) "%" }' /proc/net/wireless)"
  # elif [ "$con_quality" -gt 30 ]; then
  #   wifiicon="$(awk '/^\s*w/ { print "^c#cb8800^ ï‡«  ^d^", int($3 * 100 / 70) "%" }' /proc/net/wireless)"
  # elif [ "$con_quality" -gt 20 ]; then
  #   wifiicon="$(awk '/^\s*w/ { print "^c#c15300^ ï‡«  ^d^", int($3 * 100 / 70) "%" }' /proc/net/wireless)"
  # elif [ "$con_quality" -gt 10 ]; then
  #   wifiicon="$(awk '/^\s*w/ { print "^c#bb3100^ ï‡«  ^d^", int($3 * 100 / 70) "%" }' /proc/net/wireless)"
  # elif [ "$con_quality" -gt 1 ]; then
  #   wifiicon="$(awk '/^\s*w/ { print "^c#b20000^ ï‡«  ^d^", int($3 * 100 / 70) "%" }' /proc/net/wireless)"
  #     fi
esac

printf "%s%s\n" "$wifiicon" "$ethicon"
